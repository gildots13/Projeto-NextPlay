<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/icone.png" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
    <title>NextPlay - Home</title>
</head>
<body>

    <header>
        <div id="logo">
            <img src="./img/icone.png" alt="">
        </div>
        <div id="nome">
            NextPlay
        </div>
        <div id="social-media">
            <a href="https://www.linkedin.com/in/gildojuniorab" target="_blank">
              <img src="./img/linkedin.svg" alt="LinkedIn">  
            </a>
            <a href="https://github.com/jonesbenson94-alt" target="_blank">
                  <img src="./img/github.svg" alt="GitHub">
              </a>
              <a href="https://www.instagram.com/gildo_ts13" target="_blank">
                  <img src="./img/instagram.svg" alt="Instagram">          
                </a>
            </div>
    </header>

    <main>
    <div class="container-principal">
        <h1>Catálogo de Filmes</h1>
        <p>Avalie os filmes que você já assistiu para receber recomendações!</p>
        
        <div id="catalogo-filmes">
            </div>
    </div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const catalogoContainer = document.getElementById('catalogo-filmes');
        catalogoContainer.innerHTML = '<p>Carregando filmes...</p>';
        fetch('http://localhost:8080/api/filmes')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Falha na rede ou no servidor');
                }
                return response.json();
            })
            .then(filmes => {
                
                catalogoContainer.innerHTML = '';
                filmes.forEach(filme => {
                    const card = document.createElement('div');
                    card.className = 'filme-card';
                    const poster = document.createElement('img');
                    poster.src = filme.urlPoster;
                    poster.alt = "Pôster do filme " + filme.titulo;
                    const titulo = document.createElement('h3');
                    titulo.textContent = filme.titulo;
                    card.appendChild(poster);
                    card.appendChild(titulo);
                    catalogoContainer.appendChild(card);
                });
            })
            .catch(error => {
                console.error('Erro ao buscar filmes:', error);
                catalogoContainer.innerHTML = '<p style="color: red;">Não foi possível carregar os filmes. O servidor está rodando?</p>';
            });
    });
    </script>
</body>
</html>